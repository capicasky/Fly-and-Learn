<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fly and Learn</title>

<style>
body {
  font-family: Arial, sans-serif;
  background-color: #A7C7E7;
  text-align: center;
  padding: 40px 15px;
  color: #2c3e50;
}

h1 {
  font-size: 48px;
  color: #1b4f72;
}

.plane {
  display: inline-block;
  animation: float 2.5s ease-in-out infinite;
}

@keyframes float {
  0% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
  100% { transform: translateY(0); }
}

/* CONTENEDOR */
.metar-box {
  max-width: 420px;
  margin: 30px auto;
}

/* CONTROLES (input + botones iguales) */
.control {
  width: 100%;
  padding: 12px;
  font-size: 14px;
  box-sizing: border-box;
  margin-bottom: 10px;
}

input.control {
  text-transform: uppercase;
}

button.control {
  background: #2e7d32;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

button.control.secondary {
  background: #455a64;
}

button.control:hover {
  opacity: 0.9;
}

/* RESULTADOS */
.result-box {
  margin-top: 10px;
  background: #ffffff;
  padding: 12px;
  border-radius: 6px;
  text-align: left;
  font-family: monospace;
  white-space: pre-wrap;
  font-size: 14px;
}
</style>
</head>

<body>

<h1>Fly and Learn <span class="plane">✈️</span></h1>
<p>Aviation made simple.</p>
<p><strong>Capi Casky</strong></p>

<div class="metar-box">

  <!-- ICAO -->
  <input id="icao" class="control" placeholder="Enter ICAO (e.g. MRPV)">

  <!-- METAR + TAF -->
  <button class="control" onclick="getWeather()">Get METAR & TAF</button>

  <h3>METAR</h3>
  <div id="metar-result" class="result-box">Waiting...</div>

  <h3>TAF</h3>
  <div id="taf-result" class="result-box">Waiting...</div>

  <!-- NOTAMS -->
  <button class="control secondary" onclick="getNotams()">Get NOTAMs</button>

  <h3>NOTAMs</h3>
  <div id="notam-result" class="result-box">Waiting...</div>

</div>

<script>
function getWeather() {
  const icao = document.getElementById("icao").value.trim().toUpperCase();
  const metar = document.getElementById("metar-result");
  const taf = document.getElementById("taf-result");

  if (icao.length !== 4) {
    metar.textContent = "Invalid ICAO code";
    taf.textContent = "-";
    return;
  }

  metar.textContent = "Loading METAR...";
  taf.textContent = "Loading TAF...";

  fetch("https://api.allorigins.win/raw?url=" +
    encodeURIComponent(
      "https://aviationweather.gov/api/data/metar?ids=" + icao + "&format=raw"
    ))
    .then(r => r.text())
    .then(d => metar.textContent = d.trim() || "No METAR found");

  fetch("https://api.allorigins.win/raw?url=" +
    encodeURIComponent(
      "https://aviationweather.gov/api/data/taf?ids=" + icao + "&format=raw"
    ))
    .then(r => r.text())
    .then(d => taf.textContent = d.trim() || "No TAF found");
}

function getNotams() {
  const icao = document.getElementById("icao").value.trim().toUpperCase();
  const notam = document.getElementById("notam-result");

  if (icao.length !== 4) {
    notam.textContent = "Invalid ICAO code";
    return;
  }

  notam.textContent = "Loading NOTAMs...";

  fetch("https://api.allorigins.win/raw?url=" +
    encodeURIComponent(
      "https://aviationweather.gov/api/data/notam?ids=" + icao
    ))
    .then(r => r.text())
    .then(d => notam.textContent = d.trim() || "No NOTAMs found");
}
</script>

</body>
</html>
